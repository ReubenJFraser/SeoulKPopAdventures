/* Updated _bottom-app-bar.scss */
@use "sass:color"; // ✅ Import Sass color functions first
@use '../base/color-palette' as *;
@use '../base/variables' as *;
@use '../components/buttons/fab' as *;
@use '../components/buttons/menu-button' as *;
@use '../components/slider' as *;
@use '../components/mixins/slider' as slider; // ✅ Ensure correct import
@use '../components/mixins/buttons' as *;
@use '../components/mixins/menu' as menuMixins;

.bottom-app-bar {
  background-color: $bottom-app-bar-bg-filter; // ✅ Apply semi-transparent background
  color: $bottom-app-bar-fg;
  height: $bottom-app-bar-height;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 16px;
  position: fixed;
  bottom: 0;
  width: 100%;
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.2);
  z-index: 1000;
  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;

  .fab {
    @include fab($fab-size, $fab-bg, $fab-fg);
    position: absolute;
    bottom: 12px;
    right: 16px;
    transition: transform 0.3s ease, background-color 0.3s ease;
  }

  .zoom-slider {
    display: flex;
    flex-direction: column;
    align-items: center;

    input[type='range'] {
      @include slider.zoom-slider;
    }

    #sliderLabel {
      margin-top: 0.5rem;
      color: $text-on-primary;
      background: $primary-color;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.75rem;
    }
  }

  // Read More Button (Left Side)
  .read-more-button {
    position: absolute;
    left: 16px;
    bottom: 16px;
    background: none;
    border: none;
    cursor: pointer;
    transition: transform 0.3s ease;

    &:hover {
      transform: scale(1.1);
    }

    img {
      width: 32px;
      height: 32px;
    }
  }

  // FAB Interactions: Expanding into the Sidebar
  &.sidebar-open {
    .fab {
      transform: translateX(-200px) scale(0.85);
      background-color: color.adjust($fab-bg, $lightness: -10%); // ✅ Fix for Dart Sass
    }
  }

  // Sidebar Styles
  .sidebar {
    position: fixed;
    top: 0;
    right: -260px; // Hidden initially
    width: 250px;
    height: 100%;
    background-color: $sidebar-bg;
    box-shadow: -2px 0 10px rgba(0, 0, 0, 0.3);
    transition: right 0.3s ease-in-out;
    display: flex;
    flex-direction: column;
    padding: 20px;
    z-index: 1100;
  }

  .sidebar.open {
    right: 0;
  }

  // Mode-Specific Styles
  &.map-mode {
    background-color: color.adjust($primary-color, $lightness: 20%); // ✅ Fix for Dart Sass

    .app-bar-button {
      color: $primary-color;
    }
  }

  &.explore-mode {
    background-color: $secondary-color;

    .app-bar-button {
      color: $text-on-secondary;

      &:hover {
        color: color.adjust($text-on-secondary, $lightness: 10%);
      }
    }
  }

  &.menu-mode {
    background-color: $brown;

    .app-bar-button {
      color: $beige-light;

      &:hover {
        color: color.adjust($beige-light, $lightness: 10%);
      }
    }
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .bottom-app-bar {
    padding: 0 8px;
  }

  .fab {
    width: 48px;
    height: 48px;
  }

  .zoom-slider input[type='range'] {
    width: 100px;
  }

  .sidebar {
    width: 100%;
    right: -100%; // Fully hides sidebar on mobile until triggered
  }
}


